var ze=t=>{throw TypeError(t)};var Ie=(t,e,s)=>e.has(t)||ze("Cannot "+s);var d=(t,e,s)=>(Ie(t,e,"read from private field"),s?s.call(t):e.get(t)),y=(t,e,s)=>e.has(t)?ze("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),a=(t,e,s,n)=>(Ie(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),ge=(t,e,s)=>(Ie(t,e,"access private method"),s);import{l as G,m as o,n as C,o as b,w as Xe,S as Qe,u as l,p as Ye,q as ye,r as pe,t as R,v as F,x as we,y as Re,z as et,A as L,C as he,D as re}from"./index-vLQ6_vhL.js";import{M as kt,Z as Ot,K as Vt,G as Dt,J as Rt,I as $t,N as Zt,F as jt,L as Mt,O as Wt,P as Jt,E as qt}from"./index-vLQ6_vhL.js";function tt(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Ke(t,e,s){let n=0;for(let i=0;i<s;i++)n=n*256+t[e+i];return n}function _e(t,e,s,n){const i=[];for(;s<e+1+n;){const r=$e(t,s);i.push(r.result),s+=r.consumed,C(s<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:i}}function $e(t,e){C(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const s=n=>{C(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;s(e+1+n);const i=Ke(t,e+1,n);return s(e+1+n+i),_e(t,e,e+1+n,n+i)}else if(t[e]>=192){const n=t[e]-192;return s(e+1+n),_e(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;s(e+1+n);const i=Ke(t,e+1,n);s(e+1+n+i);const r=b(t.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:r}}else if(t[e]>=128){const n=t[e]-128;s(e+1+n);const i=b(t.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:tt(t[e])}}function ue(t){const e=G(t,"data"),s=$e(e,0);return o(s.consumed===e.length,"unexpected junk after rlp payload","data",t),s.result}function Te(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Ze(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(r){n=n.concat(Ze(r))}),n.length<=55)return n.unshift(192+n.length),n;const i=Te(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(G(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const s=Te(e.length);return s.unshift(183+s.length),s.concat(e)}const Ue="0123456789abcdef";function $(t){let e="0x";for(const s of Ze(t))e+=Ue[s>>4],e+=Ue[s&15];return e}const[st,nt]=l.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),N=new Uint32Array(80),k=new Uint32Array(80);class it extends Qe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:s,Bh:n,Bl:i,Ch:r,Cl:h,Dh:g,Dl:m,Eh:A,El:z,Fh:P,Fl:x,Gh:I,Gl:H,Hh:v,Hl:w}=this;return[e,s,n,i,r,h,g,m,A,z,P,x,I,H,v,w]}set(e,s,n,i,r,h,g,m,A,z,P,x,I,H,v,w){this.Ah=e|0,this.Al=s|0,this.Bh=n|0,this.Bl=i|0,this.Ch=r|0,this.Cl=h|0,this.Dh=g|0,this.Dl=m|0,this.Eh=A|0,this.El=z|0,this.Fh=P|0,this.Fl=x|0,this.Gh=I|0,this.Gl=H|0,this.Hh=v|0,this.Hl=w|0}process(e,s){for(let f=0;f<16;f++,s+=4)N[f]=e.getUint32(s),k[f]=e.getUint32(s+=4);for(let f=16;f<80;f++){const T=N[f-15]|0,U=k[f-15]|0,Ae=l.rotrSH(T,U,1)^l.rotrSH(T,U,8)^l.shrSH(T,U,7),Fe=l.rotrSL(T,U,1)^l.rotrSL(T,U,8)^l.shrSL(T,U,7),K=N[f-2]|0,_=k[f-2]|0,de=l.rotrSH(K,_,19)^l.rotrBH(K,_,61)^l.shrSH(K,_,6),Ge=l.rotrSL(K,_,19)^l.rotrBL(K,_,61)^l.shrSL(K,_,6),be=l.add4L(Fe,Ge,k[f-7],k[f-16]),Be=l.add4H(be,Ae,de,N[f-7],N[f-16]);N[f]=Be|0,k[f]=be|0}let{Ah:n,Al:i,Bh:r,Bl:h,Ch:g,Cl:m,Dh:A,Dl:z,Eh:P,El:x,Fh:I,Fl:H,Gh:v,Gl:w,Hh:le,Hl:ce}=this;for(let f=0;f<80;f++){const T=l.rotrSH(P,x,14)^l.rotrSH(P,x,18)^l.rotrBH(P,x,41),U=l.rotrSL(P,x,14)^l.rotrSL(P,x,18)^l.rotrBL(P,x,41),Ae=P&I^~P&v,Fe=x&H^~x&w,K=l.add5L(ce,U,Fe,nt[f],k[f]),_=l.add5H(K,le,T,Ae,st[f],N[f]),de=K|0,Ge=l.rotrSH(n,i,28)^l.rotrBH(n,i,34)^l.rotrBH(n,i,39),be=l.rotrSL(n,i,28)^l.rotrBL(n,i,34)^l.rotrBL(n,i,39),Be=n&r^n&g^r&g,qe=i&h^i&m^h&m;le=v|0,ce=w|0,v=I|0,w=H|0,I=P|0,H=x|0,{h:P,l:x}=l.add(A|0,z|0,_|0,de|0),A=g|0,z=m|0,g=r|0,m=h|0,r=n|0,h=i|0;const Ee=l.add3L(de,be,qe);n=l.add3H(Ee,_,Ge,Be),i=Ee|0}({h:n,l:i}=l.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:r,l:h}=l.add(this.Bh|0,this.Bl|0,r|0,h|0),{h:g,l:m}=l.add(this.Ch|0,this.Cl|0,g|0,m|0),{h:A,l:z}=l.add(this.Dh|0,this.Dl|0,A|0,z|0),{h:P,l:x}=l.add(this.Eh|0,this.El|0,P|0,x|0),{h:I,l:H}=l.add(this.Fh|0,this.Fl|0,I|0,H|0),{h:v,l:w}=l.add(this.Gh|0,this.Gl|0,v|0,w|0),{h:le,l:ce}=l.add(this.Hh|0,this.Hl|0,le|0,ce|0),this.set(n,i,r,h,g,m,A,z,P,x,I,H,v,w,le,ce)}roundClean(){N.fill(0),k.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const rt=Xe(()=>new it);function at(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const Ne=at();Ne.crypto||Ne.msCrypto;function ot(t){switch(t){case"sha256":return Ye.create();case"sha512":return rt.create()}o(!1,"invalid hashing algorithm name","algorithm",t)}const je=function(t){return ot("sha256").update(t).digest()};let Me=je,We=!1;function ae(t){const e=G(t,"data");return b(Me(e))}ae._=je;ae.lock=function(){We=!0};ae.register=function(t){if(We)throw new Error("sha256 is locked");Me=t};Object.freeze(ae);Object.freeze(ae);const Je="0x0000000000000000000000000000000000000000",lt=BigInt(0),ct=BigInt(36);function ke(t){t=t.toLowerCase();const e=t.substring(2).split(""),s=new Uint8Array(40);for(let i=0;i<40;i++)s[i]=e[i].charCodeAt(0);const n=G(ye(s));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Se={};for(let t=0;t<10;t++)Se[String(t)]=String(t);for(let t=0;t<26;t++)Se[String.fromCharCode(65+t)]=String(10+t);const Oe=15;function ht(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Se[n]).join("");for(;e.length>=Oe;){let n=e.substring(0,Oe);e=parseInt(n,10)%97+e.substring(n.length)}let s=String(98-parseInt(e,10)%97);for(;s.length<2;)s="0"+s;return s}const ut=function(){const t={};for(let e=0;e<36;e++){const s="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[s]=BigInt(e)}return t}();function ft(t){t=t.toLowerCase();let e=lt;for(let s=0;s<t.length;s++)e=e*ct+ut[t[s]];return e}function fe(t){if(o(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=ke(t);return o(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){o(t.substring(2,4)===ht(t),"bad icap checksum","address",t);let e=ft(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return ke("0x"+e)}o(!1,"invalid address","address",t)}function He(t,e){return{address:fe(t),storageKeys:e.map((s,n)=>(o(pe(s,32),"invalid slot",`storageKeys[${n}]`,s),s.toLowerCase()))}}function Ce(t){if(Array.isArray(t))return t.map((s,n)=>Array.isArray(s)?(o(s.length===2,"invalid slot set",`value[${n}]`,s),He(s[0],s[1])):(o(s!=null&&typeof s=="object","invalid address-slot set","value",t),He(s.address,s.storageKeys)));o(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(s=>{const n=t[s].reduce((i,r)=>(i[r]=!0,i),{});return He(s,Object.keys(n).sort())});return e.sort((s,n)=>s.address.localeCompare(n.address)),e}function dt(t){return{address:fe(t.address),nonce:F(t.nonce!=null?t.nonce:0),chainId:F(t.chainId!=null?t.chainId:0),signature:R.from(t.signature)}}function bt(t){let e;return typeof t=="string"?e=we.computePublicKey(t,!1):e=t.publicKey,fe(ye("0x"+e.substring(4)).substring(26))}function gt(t,e){return bt(we.recoverPublicKey(t,e))}const p=BigInt(0),mt=BigInt(2),yt=BigInt(27),pt=BigInt(28),Pt=BigInt(35),xt=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ve=4096*32;function Lt(t){return{blobToKzgCommitment:n=>{if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return t.blobToKzgCommitment(n);if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return G(t.blobToKZGCommitment(b(n)));o(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(n,i)=>{if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(n,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return G(t.computeBlobKZGProof(b(n),b(i)));o(!1,"unsupported KZG library","kzg",t)}}}function Ve(t,e){let s=t.toString(16);for(;s.length<2;)s="0"+s;return s+=ae(e).substring(4),"0x"+s}function oe(t){return t==="0x"?null:fe(t)}function Pe(t,e){try{return Ce(t)}catch(s){o(!1,s.message,e,t)}}function At(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const s=[];for(let n=0;n<t.length;n++){const i=t[n];if(!Array.isArray(i))throw new Error(`authorization[${n}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!i[1])throw new Error(`authorization[${n}]: null address`);s.push({address:oe(i[1]),nonce:u(i[2],"nonce"),chainId:u(i[0],"chainId"),signature:R.from({yParity:Z(i[3],"yParity"),r:re(i[4],32),s:re(i[5],32)})})}return s}catch(s){o(!1,s.message,e,t)}}function Z(t,e){return t==="0x"?0:Re(t,e)}function u(t,e){if(t==="0x")return p;const s=F(t,e);return o(s<=xt,"value exceeds uint size",e,s),s}function c(t,e){const s=F(t,"value"),n=L(s);return o(n.length<=32,"value too large",`tx.${e}`,s),n}function xe(t){return Ce(t).map(e=>[e.address,e.storageKeys])}function Ft(t){return t.map(e=>[c(e.chainId,"chainId"),e.address,c(e.nonce,"nonce"),c(e.signature.yParity,"yParity"),e.signature.r,e.signature.s])}function Gt(t,e){o(Array.isArray(t),`invalid ${e}`,"value",t);for(let s=0;s<t.length;s++)o(pe(t[s],32),"invalid ${ param } hash",`value[${s}]`,t[s]);return t}function Bt(t){const e=ue(t);o(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const s={type:0,nonce:Z(e[0],"nonce"),gasPrice:u(e[1],"gasPrice"),gasLimit:u(e[2],"gasLimit"),to:oe(e[3]),value:u(e[4],"value"),data:b(e[5]),chainId:p};if(e.length===6)return s;const n=u(e[6],"v"),i=u(e[7],"r"),r=u(e[8],"s");if(i===p&&r===p)s.chainId=n;else{let h=(n-Pt)/mt;h<p&&(h=p),s.chainId=h,o(h!==p||n===yt||n===pt,"non-canonical legacy v","v",e[6]),s.signature=R.from({r:re(e[7],32),s:re(e[8],32),v:n})}return s}function It(t,e){const s=[c(t.nonce,"nonce"),c(t.gasPrice||0,"gasPrice"),c(t.gasLimit,"gasLimit"),t.to||"0x",c(t.value,"value"),t.data];let n=p;if(t.chainId!=p)n=F(t.chainId,"tx.chainId"),o(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const r=t.signature.legacyChainId;r!=null&&(n=r)}if(!e)return n!==p&&(s.push(L(n)),s.push("0x"),s.push("0x")),$(s);let i=BigInt(27+e.yParity);return n!==p?i=R.getChainIdV(n,e.v):BigInt(e.v)!==i&&o(!1,"tx.chainId/sig.v mismatch","sig",e),s.push(L(i)),s.push(L(e.r)),s.push(L(e.s)),$(s)}function Le(t,e){let s;try{if(s=Z(e[0],"yParity"),s!==0&&s!==1)throw new Error("bad yParity")}catch{o(!1,"invalid yParity","yParity",e[0])}const n=re(e[1],32),i=re(e[2],32),r=R.from({r:n,s:i,yParity:s});t.signature=r}function Ht(t){const e=ue(G(t).slice(1));o(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",b(t));const s={type:2,chainId:u(e[0],"chainId"),nonce:Z(e[1],"nonce"),maxPriorityFeePerGas:u(e[2],"maxPriorityFeePerGas"),maxFeePerGas:u(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:u(e[4],"gasLimit"),to:oe(e[5]),value:u(e[6],"value"),data:b(e[7]),accessList:Pe(e[8],"accessList")};return e.length===9||Le(s,e.slice(9)),s}function vt(t,e){const s=[c(t.chainId,"chainId"),c(t.nonce,"nonce"),c(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),c(t.maxFeePerGas||0,"maxFeePerGas"),c(t.gasLimit,"gasLimit"),t.to||"0x",c(t.value,"value"),t.data,xe(t.accessList||[])];return e&&(s.push(c(e.yParity,"yParity")),s.push(L(e.r)),s.push(L(e.s))),he(["0x02",$(s)])}function wt(t){const e=ue(G(t).slice(1));o(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",b(t));const s={type:1,chainId:u(e[0],"chainId"),nonce:Z(e[1],"nonce"),gasPrice:u(e[2],"gasPrice"),gasLimit:u(e[3],"gasLimit"),to:oe(e[4]),value:u(e[5],"value"),data:b(e[6]),accessList:Pe(e[7],"accessList")};return e.length===8||Le(s,e.slice(8)),s}function St(t,e){const s=[c(t.chainId,"chainId"),c(t.nonce,"nonce"),c(t.gasPrice||0,"gasPrice"),c(t.gasLimit,"gasLimit"),t.to||"0x",c(t.value,"value"),t.data,xe(t.accessList||[])];return e&&(s.push(c(e.yParity,"recoveryParam")),s.push(L(e.r)),s.push(L(e.s))),he(["0x01",$(s)])}function Ct(t){let e=ue(G(t).slice(1)),s="3",n=null;if(e.length===4&&Array.isArray(e[0])){s="3 (network format)";const r=e[1],h=e[2],g=e[3];o(Array.isArray(r),"invalid network format: blobs not an array","fields[1]",r),o(Array.isArray(h),"invalid network format: commitments not an array","fields[2]",h),o(Array.isArray(g),"invalid network format: proofs not an array","fields[3]",g),o(r.length===h.length,"invalid network format: blobs/commitments length mismatch","fields",e),o(r.length===g.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let m=0;m<e[1].length;m++)n.push({data:r[m],commitment:h[m],proof:g[m]});e=e[0]}o(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${s}`,"data",b(t));const i={type:3,chainId:u(e[0],"chainId"),nonce:Z(e[1],"nonce"),maxPriorityFeePerGas:u(e[2],"maxPriorityFeePerGas"),maxFeePerGas:u(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:u(e[4],"gasLimit"),to:oe(e[5]),value:u(e[6],"value"),data:b(e[7]),accessList:Pe(e[8],"accessList"),maxFeePerBlobGas:u(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),o(i.to!=null,`invalid address for transaction type: ${s}`,"data",t),o(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let r=0;r<i.blobVersionedHashes.length;r++)o(pe(i.blobVersionedHashes[r],32),`invalid blobVersionedHash at index ${r}: must be length 32`,"data",t);return e.length===11||Le(i,e.slice(11)),i}function Et(t,e,s){const n=[c(t.chainId,"chainId"),c(t.nonce,"nonce"),c(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),c(t.maxFeePerGas||0,"maxFeePerGas"),c(t.gasLimit,"gasLimit"),t.to||Je,c(t.value,"value"),t.data,xe(t.accessList||[]),c(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Gt(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(c(e.yParity,"yParity")),n.push(L(e.r)),n.push(L(e.s)),s)?he(["0x03",$([n,s.map(i=>i.data),s.map(i=>i.commitment),s.map(i=>i.proof)])]):he(["0x03",$(n)])}function zt(t){const e=ue(G(t).slice(1));o(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",b(t));const s={type:4,chainId:u(e[0],"chainId"),nonce:Z(e[1],"nonce"),maxPriorityFeePerGas:u(e[2],"maxPriorityFeePerGas"),maxFeePerGas:u(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:u(e[4],"gasLimit"),to:oe(e[5]),value:u(e[6],"value"),data:b(e[7]),accessList:Pe(e[8],"accessList"),authorizationList:At(e[9],"authorizationList")};return e.length===10||Le(s,e.slice(10)),s}function Kt(t,e){const s=[c(t.chainId,"chainId"),c(t.nonce,"nonce"),c(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),c(t.maxFeePerGas||0,"maxFeePerGas"),c(t.gasLimit,"gasLimit"),t.to||"0x",c(t.value,"value"),t.data,xe(t.accessList||[]),Ft(t.authorizationList||[])];return e&&(s.push(c(e.yParity,"yParity")),s.push(L(e.r)),s.push(L(e.s))),he(["0x04",$(s)])}var B,j,M,W,J,q,X,Q,Y,ee,te,se,D,O,E,V,ne,ie,me;const S=class S{constructor(){y(this,ie);y(this,B);y(this,j);y(this,M);y(this,W);y(this,J);y(this,q);y(this,X);y(this,Q);y(this,Y);y(this,ee);y(this,te);y(this,se);y(this,D);y(this,O);y(this,E);y(this,V);y(this,ne);a(this,B,null),a(this,j,null),a(this,W,0),a(this,J,p),a(this,q,null),a(this,X,null),a(this,Q,null),a(this,M,"0x"),a(this,Y,p),a(this,ee,p),a(this,te,null),a(this,se,null),a(this,D,null),a(this,O,null),a(this,E,null),a(this,V,null),a(this,ne,null)}get type(){return d(this,B)}set type(e){switch(e){case null:a(this,B,null);break;case 0:case"legacy":a(this,B,0);break;case 1:case"berlin":case"eip-2930":a(this,B,1);break;case 2:case"london":case"eip-1559":a(this,B,2);break;case 3:case"cancun":case"eip-4844":a(this,B,3);break;case 4:case"eip-7702":a(this,B,4);break;default:o(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=d(this,j);return e==null&&this.type===3?Je:e}set to(e){a(this,j,e==null?null:fe(e))}get nonce(){return d(this,W)}set nonce(e){a(this,W,Re(e,"value"))}get gasLimit(){return d(this,J)}set gasLimit(e){a(this,J,F(e))}get gasPrice(){const e=d(this,q);return e==null&&(this.type===0||this.type===1)?p:e}set gasPrice(e){a(this,q,e==null?null:F(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=d(this,X);return e??(this.type===2||this.type===3?p:null)}set maxPriorityFeePerGas(e){a(this,X,e==null?null:F(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=d(this,Q);return e??(this.type===2||this.type===3?p:null)}set maxFeePerGas(e){a(this,Q,e==null?null:F(e,"maxFeePerGas"))}get data(){return d(this,M)}set data(e){a(this,M,b(e))}get value(){return d(this,Y)}set value(e){a(this,Y,F(e,"value"))}get chainId(){return d(this,ee)}set chainId(e){a(this,ee,F(e))}get signature(){return d(this,te)||null}set signature(e){a(this,te,e==null?null:R.from(e))}get accessList(){const e=d(this,se)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){a(this,se,e==null?null:Ce(e))}get authorizationList(){const e=d(this,ne)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){a(this,ne,e==null?null:e.map(s=>dt(s)))}get maxFeePerBlobGas(){const e=d(this,D);return e==null&&this.type===3?p:e}set maxFeePerBlobGas(e){a(this,D,e==null?null:F(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=d(this,O);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){o(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let s=0;s<e.length;s++)o(pe(e[s],32),"invalid blobVersionedHash",`value[${s}]`,e[s])}a(this,O,e)}get blobs(){return d(this,V)==null?null:d(this,V).map(e=>Object.assign({},e))}set blobs(e){if(e==null){a(this,V,null);return}const s=[],n=[];for(let i=0;i<e.length;i++){const r=e[i];if(et(r)){C(d(this,E),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let h=G(r);if(o(h.length<=ve,"blob is too large",`blobs[${i}]`,r),h.length!==ve){const A=new Uint8Array(ve);A.set(h),h=A}const g=d(this,E).blobToKzgCommitment(h),m=b(d(this,E).computeBlobKzgProof(h,g));s.push({data:b(h),commitment:b(g),proof:m}),n.push(Ve(1,g))}else{const h=b(r.commitment);s.push({data:b(r.data),commitment:h,proof:b(r.proof)}),n.push(Ve(1,h))}}a(this,V,s),a(this,O,n)}get kzg(){return d(this,E)}set kzg(e){e==null?a(this,E,null):a(this,E,Lt(e))}get hash(){return this.signature==null?null:ye(ge(this,ie,me).call(this,!0,!1))}get unsignedHash(){return ye(this.unsignedSerialized)}get from(){return this.signature==null?null:gt(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:we.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ge(this,ie,me).call(this,!0,!0)}get unsignedSerialized(){return ge(this,ie,me).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,s=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=d(this,D)!=null||d(this,O);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&C(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),C(!s||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),C(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return this.type!=null?r.push(this.type):this.authorizationList&&this.authorizationList.length?r.push(4):s?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(i&&this.to||(r.push(0),r.push(1),r.push(2)),r.push(3)),r.sort(),r}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return S.from(this)}toJSON(){const e=s=>s==null?null:s.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new S;if(typeof e=="string"){const n=G(e);if(n[0]>=127)return S.from(Bt(n));switch(n[0]){case 1:return S.from(wt(n));case 2:return S.from(Ht(n));case 3:return S.from(Ct(n));case 4:return S.from(zt(n))}C(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new S;return e.type!=null&&(s.type=e.type),e.to!=null&&(s.to=e.to),e.nonce!=null&&(s.nonce=e.nonce),e.gasLimit!=null&&(s.gasLimit=e.gasLimit),e.gasPrice!=null&&(s.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(s.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(s.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(s.data=e.data),e.value!=null&&(s.value=e.value),e.chainId!=null&&(s.chainId=e.chainId),e.signature!=null&&(s.signature=R.from(e.signature)),e.accessList!=null&&(s.accessList=e.accessList),e.authorizationList!=null&&(s.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(s.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(s.kzg=e.kzg),e.blobs!=null&&(s.blobs=e.blobs),e.hash!=null&&(o(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),o(s.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(o(s.isSigned(),"unsigned transaction cannot define '.from'","tx",e),o(s.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),s}};B=new WeakMap,j=new WeakMap,M=new WeakMap,W=new WeakMap,J=new WeakMap,q=new WeakMap,X=new WeakMap,Q=new WeakMap,Y=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,D=new WeakMap,O=new WeakMap,E=new WeakMap,V=new WeakMap,ne=new WeakMap,ie=new WeakSet,me=function(e,s){C(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return It(this,n);case 1:return St(this,n);case 2:return vt(this,n);case 3:return Et(this,n,s?this.blobs:null);case 4:return Kt(this,n)}C(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let De=S;export{kt as MessagePrefix,R as Signature,we as SigningKey,De as Transaction,Je as ZeroAddress,Ot as ZeroHash,Ce as accessListify,C as assert,o as assertArgument,Vt as assertPrivate,dt as authorizationify,bt as computeAddress,he as concat,Dt as dataLength,ue as decodeRlp,Rt as defineProperties,$ as encodeRlp,fe as getAddress,F as getBigInt,G as getBytes,$t as getBytesCopy,Re as getNumber,Zt as getUint,jt as hashMessage,b as hexlify,et as isBytesLike,pe as isHexString,ye as keccak256,Mt as makeError,gt as recoverAddress,ae as sha256,L as toBeArray,Wt as toBeHex,Jt as toUtf8Bytes,qt as version,re as zeroPadValue};
